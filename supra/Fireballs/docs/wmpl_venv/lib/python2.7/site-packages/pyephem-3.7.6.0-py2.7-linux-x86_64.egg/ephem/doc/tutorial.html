

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The PyEphem Tutorial &mdash; Western Meteor Physics Group Seismic and Infrasonic Meteor Program  documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../../../../../_static/wmpl.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../../../" src="../../../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../../../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../../../index.html" class="icon icon-home"> Western Meteor Physics Group Seismic and Infrasonic Meteor Program
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/About.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/Features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/Theory.html">Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/Methods.html">Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/Installation.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/Usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/Atmosphere.html">Atmosphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/References.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/ExtraStations.html">Extra Stations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/Errors.html">Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/Files.html">Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../docs/Code.html">Code</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../index.html">Western Meteor Physics Group Seismic and Infrasonic Meteor Program</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../../../index.html">Docs</a> &raquo;</li>
        
      <li>The PyEphem Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../../../../_sources/wmpl_venv/lib/python2.7/site-packages/pyephem-3.7.6.0-py2.7-linux-x86_64.egg/ephem/doc/tutorial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-pyephem-tutorial">
<h1>The PyEphem Tutorial<a class="headerlink" href="#the-pyephem-tutorial" title="Permalink to this headline">¶</a></h1>
<p>Version 2007.November.1, for PyEphem version 3.7.2.2 and later.</p>
<p>The <a class="reference external" href="http://rhodesmill.org/pyephem/">PyEphem library</a> provides Python programmers
with access to the astronomical routines
used by the <a class="reference external" href="http://www.clearskyinstitute.com/xephem/">XEphem</a> interactive astronomical ephemeris application;
its author, <a class="reference external" href="http://www.clearskyinstitute.com/resumes/ecdowney/resume.html">Elwood Charles Downey</a>, has generously granted permission
for PyEphem to be built upon his work.</p>
<p>After installing the module,
you can use it in Python with the statement:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ephem</span>
</pre></div>
</div>
<p>This tutorial assumes that you are familiar with astronomy,
but necessarily all of the issues surrounding astronomical calculation;
those who find its discussions tedious
will probably just want to read over its examples
to quickly familiarize themselves with how PyEphem works.</p>
<div class="section" id="first-steps">
<h2>First Steps<a class="headerlink" href="#first-steps" title="Permalink to this headline">¶</a></h2>
<p>PyEphem will compute the positions of celestial bodies on particular dates,
and can determine where in the sky they appear from any location on earth.</p>
<p>When using PyEphem,
you will usually create instances of the bodies that interest you,
compute their position for various dates and perhaps geographic locations,
and finally print or display the result.
For example,
to determine the location and brightness of Uranus
on the night it was discovered
we simply create a <code class="docutils literal notranslate"><span class="pre">Uranus</span></code> object
and ask where it was on the 13th of March, 1781:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Uranus</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="s1">&#39;1781/3/13&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">ra</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">dec</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">mag</span><span class="p">))</span>
<span class="go">5:35:45.28 23:32:54.1 5.6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">constellation</span><span class="p">(</span><span class="n">u</span><span class="p">))</span>
<span class="go">(&#39;Tau&#39;, &#39;Taurus&#39;)</span>
</pre></div>
</div>
<p>Calling <code class="docutils literal notranslate"><span class="pre">compute()</span></code> sets many attributes of a body,
beyond the right ascension, declination, and magnitude printed here;
see the <a class="reference external" href="quick">Quick Reference</a>
for other attributes that <code class="docutils literal notranslate"><span class="pre">compute()</span></code> sets.
You see that measurements are formatted as an astronomer would expect:
dates are expressed as year, month, and day, delimited by slashes;
right ascension as hours of arc around the celestial equator;
and declination as degrees north of the equator.
The colons between the components of an angle are a compromise —
the more traditional 21°46′15.66′′ is not possible
with the symbols on a standard computer keyboard.</p>
<p>The code above created and used only one instance of <code class="docutils literal notranslate"><span class="pre">Uranus</span></code>,
but you can also have several going at once.
For example,
to determine how close Neptune and Jupiter lay
as Galileo famously observed them —
he was busy watching the Jovian moons he had discovered two years earlier
and, though Neptune had moved overnight, he dismissed it as a background star
and left its discovery to wait another two hundred years —
we create one instance of each planet and compare their positions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Jupiter</span><span class="p">(</span><span class="s1">&#39;1612/12/28&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Neptune</span><span class="p">(</span><span class="s1">&#39;1612/12/28&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">ra</span><span class="p">,</span> <span class="n">j</span><span class="o">.</span><span class="n">dec</span><span class="p">,</span> <span class="n">j</span><span class="o">.</span><span class="n">mag</span><span class="p">))</span>
<span class="go">11:48:20.52 2:41:13.6 -1.96</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">ra</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">dec</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">mag</span><span class="p">))</span>
<span class="go">11:49:15.77 2:37:04.5 7.92</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">separation</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
<span class="go">0:14:24.6</span>
</pre></div>
</div>
<p>Notice that, while in our first example
we created our <code class="docutils literal notranslate"><span class="pre">Uranus</span></code> instance
and called its <code class="docutils literal notranslate"><span class="pre">compute()</span></code> method as two separate steps,
we have here taken the shortcut of providing dates
as we created each planet;
in general, any arguments you provide when creating a planet
are used to <code class="docutils literal notranslate"><span class="pre">compute()</span></code> its initial position.
The <code class="docutils literal notranslate"><span class="pre">separation()</span></code> function
computes the angle in degrees between two bodies,
as measured by their right ascension and declination.
In this case,
the separation of 0°14′
was small enough to place both planets in Galileo’s field of view.</p>
<p>You can even create several instances of the same body.
Let’s compare how far Mars moves in one day at perihelion versus aphelion,
and verify that its speed is greater when closer to the Sun:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">hpos</span><span class="p">(</span><span class="n">body</span><span class="p">):</span> <span class="k">return</span> <span class="n">body</span><span class="o">.</span><span class="n">hlon</span><span class="p">,</span> <span class="n">body</span><span class="o">.</span><span class="n">hlat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ma0</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Mars</span><span class="p">(</span><span class="s1">&#39;1976/05/21&#39;</span><span class="p">)</span>    <span class="c1"># ma: mars near aphelion</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ma1</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Mars</span><span class="p">(</span><span class="s1">&#39;1976/05/22&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">separation</span><span class="p">(</span><span class="n">hpos</span><span class="p">(</span><span class="n">ma0</span><span class="p">),</span> <span class="n">hpos</span><span class="p">(</span><span class="n">ma1</span><span class="p">)))</span>
<span class="go">0:26:11.4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mp0</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Mars</span><span class="p">(</span><span class="s1">&#39;1975/06/13&#39;</span><span class="p">)</span>    <span class="c1"># mp: mars near perihelion</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mp1</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Mars</span><span class="p">(</span><span class="s1">&#39;1975/06/14&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">separation</span><span class="p">(</span><span class="n">hpos</span><span class="p">(</span><span class="n">mp0</span><span class="p">),</span> <span class="n">hpos</span><span class="p">(</span><span class="n">mp1</span><span class="p">)))</span>
<span class="go">0:38:05.2</span>
</pre></div>
</div>
<p>Here we wanted to measure the motion of Mars around the Sun,
but <code class="docutils literal notranslate"><span class="pre">separation()</span></code> normally compares
the right ascension and declination of two bodies —
which would measure the motion of Mars across the sky
of the moving platform of our earth.
So instead of giving <code class="docutils literal notranslate"><span class="pre">separation()</span></code> the Mars instances themselves,
we specifically provided
the heliocentric longitude and latitude of each instance,
revealing how far Mars moved around the Sun
regardless of how this motion appeared from earth.</p>
<p>In general <code class="docutils literal notranslate"><span class="pre">separation()</span></code> can measure the angle
between any pair of spherical coordinates,
so long as the elements of each coordinate are spherical longitude
(angle around the sphere)
followed by spherical latitude
(angle above or below its equator).
Each pair should be provided as a two-item sequence like a tuple or list.
Appropriate coordinate pairs include right ascension and declination;
heliocentric longitude and latitude;
azimuth and altitude;
and even the geographic longitude and latitude of two locations on earth.</p>
</div>
<div class="section" id="computing-with-angles">
<h2>Computing With Angles<a class="headerlink" href="#computing-with-angles" title="Permalink to this headline">¶</a></h2>
<p>Sometimes you may want to perform computations with times and angles.
Strings like <code class="docutils literal notranslate"><span class="pre">'7:45:45.15'</span></code> are attractive when printed,
but cumbersome to add and multiply;
so PyEphem also makes times and angles available as floating-point numbers
for more convenient use in mathematical formulae.</p>
<p>All angles returned by PyEphem are actually measured in radians.
Let us return to our first example above,
and examine the results in more detail:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Uranus</span><span class="p">(</span><span class="s1">&#39;1871/3/13&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">dec</span><span class="p">))</span>
<span class="go">22:04:47.4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.12f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">float</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">dec</span><span class="p">))</span>
<span class="go">0.385365877213</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.11f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">dec</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">1.38536587721</span>
</pre></div>
</div>
<p>The rule is that angles become strings when printed or given to <code class="docutils literal notranslate"><span class="pre">str()</span></code>,
but otherwise act like Python floating point numbers.
Note that the format operator <code class="docutils literal notranslate"><span class="pre">%</span></code> can return either value,
depending on whether you use <code class="docutils literal notranslate"><span class="pre">%s</span></code> or one of the numeric formats:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;as a string: </span><span class="si">%s</span><span class="s2">, as a float: </span><span class="si">%f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">dec</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">dec</span><span class="p">))</span>
<span class="go">as a string: 22:04:47.4, as a float: 0.385366</span>
</pre></div>
</div>
<p>As an example computation,
we can verify Kepler’s Second Law of planetary motion —
that a line drawn from a planet to the sun
will sweep out equal areas over equal periods of time.
We have already computed two positions for Mars near its aphelion
that are one day apart
(and defined a helpful <code class="docutils literal notranslate"><span class="pre">hpos()</span></code> function; see above).
We can estimate the actual distance it moved in space that day
by multiplying its angular motion in radians by its distance from the Sun:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aph_angle</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">separation</span><span class="p">(</span><span class="n">hpos</span><span class="p">(</span><span class="n">ma0</span><span class="p">),</span> <span class="n">hpos</span><span class="p">(</span><span class="n">ma1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aph_distance</span> <span class="o">=</span> <span class="n">aph_angle</span> <span class="o">*</span> <span class="n">ma0</span><span class="o">.</span><span class="n">sun_distance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.13f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">aph_distance</span><span class="p">)</span>
<span class="go">0.0126911122281</span>
</pre></div>
</div>
<p>So, it moved nearly 0.013 AU in a single day (about 1.9 million kilometers).
A line drawn between it and the sun would have, roughly,
filled in a triangle whose base is 0.013 AU,
whose height is the distance to the Sun,
and whose area is therefore:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aph_area</span> <span class="o">=</span> <span class="n">aph_distance</span> <span class="o">*</span> <span class="n">ma0</span><span class="o">.</span><span class="n">sun_distance</span> <span class="o">/</span> <span class="mf">2.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.13f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">aph_area</span><span class="p">)</span>
<span class="go">0.0105710807908</span>
</pre></div>
</div>
<p>According to Kepler our results should be the same
for any other one-day period for which we compute this;
we can try using the two Mars positions from near perihelion:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">peri_angle</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">separation</span><span class="p">(</span><span class="n">hpos</span><span class="p">(</span><span class="n">mp0</span><span class="p">),</span> <span class="n">hpos</span><span class="p">(</span><span class="n">mp1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">peri_distance</span> <span class="o">=</span> <span class="n">peri_angle</span> <span class="o">*</span> <span class="n">mp0</span><span class="o">.</span><span class="n">sun_distance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">peri_area</span> <span class="o">=</span> <span class="n">peri_distance</span> <span class="o">*</span> <span class="n">mp0</span><span class="o">.</span><span class="n">sun_distance</span> <span class="o">/</span> <span class="mf">2.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.13f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">peri_area</span><span class="p">)</span>    <span class="c1"># the area, to high precision, is the same!</span>
<span class="go">0.0105712665517</span>
</pre></div>
</div>
<p>Despite the fact that Mars moves twenty percent faster at perihelion,
the area swept out — to quite high precision — is identical,
just as Kepler predicted.
Some of the tiny difference between the two numbers we got
results from our having approximated sectors of its orbit as triangles;
the rest comes from the pertubations of other planets
and other small sources of irregularity in its motion.</p>
<p>When you use an angle in mathematical operations,
Python will return normal floats that lack the special power
of printing themselves as degrees or hours or arc.
To turn radian measures back into printable angles,
PyEphem supplies both a <code class="docutils literal notranslate"><span class="pre">degrees()</span></code> and an <code class="docutils literal notranslate"><span class="pre">hours()</span></code> function.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%.13f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">peri_angle</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
<span class="go">0.0221584026149</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">peri_angle</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
<span class="go">1:16:10.5</span>
</pre></div>
</div>
<p>You may find that your angle arithmetic often returns angles
that are less than zero or that exceed twice pi.
You can access the <code class="docutils literal notranslate"><span class="pre">norm</span></code> attribute of an angle
to force it into this range:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deg</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">degrees</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">deg</span><span class="p">(</span><span class="n">deg</span><span class="p">(</span><span class="s1">&#39;270&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">deg</span><span class="p">(</span><span class="s1">&#39;180&#39;</span><span class="p">)))</span>
<span class="go">450:00:00.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">deg</span><span class="p">(</span><span class="n">deg</span><span class="p">(</span><span class="s1">&#39;270&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">deg</span><span class="p">(</span><span class="s1">&#39;180&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">norm</span><span class="p">)</span>
<span class="go">90:00:00.0</span>
</pre></div>
</div>
</div>
<div class="section" id="computing-with-dates">
<h2>Computing With Dates<a class="headerlink" href="#computing-with-dates" title="Permalink to this headline">¶</a></h2>
<p>PyEphem only processes and returns dates that are in Universal Time (UT),
which is simliar to Standard Time in Greenwich, England,
on the Earth’s Prime Meridian.
If you need to display a PyEphem time in your own timezone,
use the <code class="docutils literal notranslate"><span class="pre">localtime()</span></code> function,
which returns a Python <code class="docutils literal notranslate"><span class="pre">datetime</span></code> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="s1">&#39;1984/12/21 15:00&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ephem</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">datetime.datetime(1984, 12, 21, 10, 0, 0, 4)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">ctime</span><span class="p">())</span>
<span class="go">Fri Dec 21 10:00:00 1984</span>
</pre></div>
</div>
<p>As you can see from this result,
I am writing this <em>Tutorial</em> in the Eastern Time zone,
which in the winter is five hours earlier than the time in Greenwich.</p>
<p>PyEphem actually represents dates
as the number of days since noon on 1899 December 31.
While you will probably not find
the absolute value of this number very interesting,
the fact that it is counted in days
means you can move one day forward or backward
by adding or subtracting one.
The rules described above for angles hold for floats as well:
you can create them with <code class="docutils literal notranslate"><span class="pre">ephem.Date()</span></code>,
but after doing arithmetic on them
you must pass them back through <code class="docutils literal notranslate"><span class="pre">ephem.Date()</span></code>
to turn them back into dates:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="s1">&#39;1950/2/28&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">18321.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">d</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<span class="go">1950/3/1 00:00:00</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ephem</span></code> module provides three constants
<code class="docutils literal notranslate"><span class="pre">hour</span></code>, <code class="docutils literal notranslate"><span class="pre">minute</span></code>, and <code class="docutils literal notranslate"><span class="pre">second</span></code>,
which can be added or subtracted from dates
to increment or decrement them by the desired amount.</p>
<p>You can specify dates in several formats;
not only can the strings that specify them
use either floating point days or provide hours, minutes, and seconds,
but you can also provide the components of the date in a tuple.
The following assignments are all equivalent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="mf">34530.34375</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="s1">&#39;1994/7/16.84375&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="s1">&#39;1994/7/16 20:15&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Date</span><span class="p">((</span><span class="mi">1994</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mf">16.84375</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Date</span><span class="p">((</span><span class="mi">1994</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<p>And to complement the fact that you can specify dates as a tuple,
two methods are provided for extracting the date as a tuple:
<code class="docutils literal notranslate"><span class="pre">triple()</span></code> returns a year, month, and floating point day,
while <code class="docutils literal notranslate"><span class="pre">tuple()</span></code> provides everything down to floating point seconds.
After any of the above calls,
the date can be examined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;as a float: </span><span class="si">%f</span><span class="se">\n</span><span class="s1">as a string: &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span>
<span class="go">as a float: 34530.343750</span>
<span class="go">as a string: &quot;1994/7/16 20:15:00&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">triple</span><span class="p">())</span>
<span class="go">(1994, 7, 16.84375)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">tuple</span><span class="p">())</span>
<span class="go">(1994, 7, 16, 20, 15, 0.0)</span>
</pre></div>
</div>
<p>Any PyEphem function argument that requires an angle or date
will accept any of the representations shown above;
so you could, for instance,
give a three-element tuple
directly to <code class="docutils literal notranslate"><span class="pre">compute()</span></code> for the date,
rather than having to pass the tuple through the
<code class="docutils literal notranslate"><span class="pre">Date()</span></code> function before using it
(though the latter approach would also work).</p>
</div>
<div class="section" id="computations-for-particular-observers">
<h2>Computations for Particular Observers<a class="headerlink" href="#computations-for-particular-observers" title="Permalink to this headline">¶</a></h2>
<p>The examples so far have determined
the position of bodies against the background of stars,
and their location in the solar system.
But to observe a body we need to know more —
whether it is visible from our latitude,
when it rises and sets,
and the height it achieves above our horizon.
In return for this more detailed information,
PyEphem quite reasonably demands to know our position on the earth’s surface;
we can provide this through an object called an <code class="docutils literal notranslate"><span class="pre">Observer</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gatech</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Observer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gatech</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">gatech</span><span class="o">.</span><span class="n">lat</span> <span class="o">=</span> <span class="s1">&#39;-84.39733&#39;</span><span class="p">,</span> <span class="s1">&#39;33.775867&#39;</span>
</pre></div>
</div>
<p>When the <code class="docutils literal notranslate"><span class="pre">Observer</span></code> is provided to <code class="docutils literal notranslate"><span class="pre">compute()</span></code>
instead of a simple date and epoch,
PyEphem has enough information
to determine where in the sky the body appears.
Fill in the <code class="docutils literal notranslate"><span class="pre">date</span></code> and <code class="docutils literal notranslate"><span class="pre">epoch</span></code> fields of the <code class="docutils literal notranslate"><span class="pre">Observer</span></code>
with the values you would otherwise provide to <code class="docutils literal notranslate"><span class="pre">compute()</span></code>;
the epoch defaults to the year 2000 if you do not set it yourself.
As an example, we can examine the 1984 eclipse of the sun from Atlanta:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gatech</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="s1">&#39;1984/5/30 16:22:56&#39;</span>   <span class="c1"># 12:22:56 EDT</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sun</span><span class="p">,</span> <span class="n">moon</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Sun</span><span class="p">(),</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Moon</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sun</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">gatech</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">moon</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">gatech</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sun</span><span class="o">.</span><span class="n">alt</span><span class="p">,</span> <span class="n">sun</span><span class="o">.</span><span class="n">az</span><span class="p">))</span>
<span class="go">70:08:39.2 122:11:26.4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">moon</span><span class="o">.</span><span class="n">alt</span><span class="p">,</span> <span class="n">moon</span><span class="o">.</span><span class="n">az</span><span class="p">))</span>
<span class="go">70:08:39.5 122:11:26.0</span>
</pre></div>
</div>
<p>For those unfamiliar with azimuth and altitude:
they describe position in the sky by measuring angle around the horizon,
then angle above the horizon.
To locate the Sun and Moon in this instance,
you would begin by facing north and then turn right 122°,
bringing you almost around to the southeast
(which lies 125° around the sky from north);
and by looking 70° above that point on the horizon —
fairly high, given that 90° is directly overhead —
you would find the Sun and Moon.</p>
<p>Eclipses are classified as <em>partial</em>
when the Moon merely takes a bite out of the Sun;
<em>annular</em>
when the Moon passes inside the disc of the sun
to leave only a brilliant ring (Latin <em>annulus</em>) visible;
and <em>total</em> when the moon is large enough to cover the Sun completely.
To classify this eclipse we must compare the size of the Sun and Moon
to the distance between them.
Since each argument to <code class="docutils literal notranslate"><span class="pre">separation()</span></code>
can be an arbitrary measure of spherical longitude and latitude,
we can provide azimuth and altitude:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">separation</span><span class="p">((</span><span class="n">sun</span><span class="o">.</span><span class="n">az</span><span class="p">,</span> <span class="n">sun</span><span class="o">.</span><span class="n">alt</span><span class="p">),</span> <span class="p">(</span><span class="n">moon</span><span class="o">.</span><span class="n">az</span><span class="p">,</span> <span class="n">moon</span><span class="o">.</span><span class="n">alt</span><span class="p">)))</span>
<span class="go">0:00:00.3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%.8f</span><span class="s2"> </span><span class="si">%.8f</span><span class="s2"> </span><span class="si">%.11f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sun</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">moon</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">sun</span><span class="o">.</span><span class="n">size</span> <span class="o">-</span> <span class="n">moon</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>
<span class="go">1892.91210938 1891.85778809 1.05432128906</span>
</pre></div>
</div>
<p>The Sun’s diameter is larger by 1.05′′,
so placing the Moon at its center
would leave an annulus of width
1.05′′ / 2 = 0.52′′
visible around the Moon’s edge.
But, in fact, the center of the Moon lies 0.48 arc seconds
towards one edge of the sun —
not enough to move its edge outside the sun and make a partial eclipse,
but enough to make a quite lopsided annular eclipse,
whose annulus is 0.52′′ + 0.48 = 1.00′′
wide on one side
and a scant 0.52′′ - 0.48 = 0.04′′ on the other.</p>
<p>The sky positions computed by PyEphem
take into account the refraction of the atmosphere,
which bends upwards the images of bodies near the horizon.
During sunset, for example, the descent of the sun appears to slow
because the atmosphere bends its image upwards as it approaches the horizon:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gatech</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="s1">&#39;1984/5/31 00:00&#39;</span>   <span class="c1"># 20:00 EDT</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sun</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">gatech</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">old_az</span><span class="p">,</span> <span class="n">old_alt</span> <span class="o">=</span> <span class="n">sun</span><span class="o">.</span><span class="n">az</span><span class="p">,</span> <span class="n">sun</span><span class="o">.</span><span class="n">alt</span>
<span class="gp">... </span>    <span class="n">gatech</span><span class="o">.</span><span class="n">date</span> <span class="o">+=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">minute</span> <span class="o">*</span> <span class="mf">5.</span>
<span class="gp">... </span>    <span class="n">sun</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">gatech</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">sep</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">separation</span><span class="p">((</span><span class="n">old_az</span><span class="p">,</span> <span class="n">old_alt</span><span class="p">),</span> <span class="p">(</span><span class="n">sun</span><span class="o">.</span><span class="n">az</span><span class="p">,</span> <span class="n">sun</span><span class="o">.</span><span class="n">alt</span><span class="p">))</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">gatech</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">sun</span><span class="o">.</span><span class="n">alt</span><span class="p">,</span> <span class="n">sep</span><span class="p">))</span>
<span class="go">1984/5/31 00:05:00 6:17:36.8 1:08:48.1</span>
<span class="go">1984/5/31 00:10:00 5:21:15.6 1:08:36.3</span>
<span class="go">1984/5/31 00:15:00 4:25:31.6 1:08:20.0</span>
<span class="go">1984/5/31 00:20:00 3:30:34.2 1:07:56.5</span>
<span class="go">1984/5/31 00:25:00 2:36:37.8 1:07:22.7</span>
<span class="go">1984/5/31 00:30:00 1:44:04.6 1:06:32.2</span>
<span class="go">1984/5/31 00:35:00 0:53:28.7 1:05:17.0</span>
<span class="go">1984/5/31 00:40:00 0:05:37.8 1:03:28.3</span>
</pre></div>
</div>
<p>We see that the Sun’s apparent angular speed
indeed decreased as it approached the horizon,
from around 1°08′ to barely 1°03′ each five minutes.</p>
<p>Since atmospheric refraction varies with temperature and pressure,
you can improve the accuracy of PyEphem
by providing these values from a local forecast,
or at least from average values for your location and season.
By default an <code class="docutils literal notranslate"><span class="pre">Observer</span></code> uses 15°C and 1010 mB,
the values for these parameters at sea level
in the standard atmosphere model used in aviation.
Setting the pressure to zero
directs PyEphem to simply ignore atmospheric refraction.</p>
<p>Once PyEphem knows your location it can also work out
when bodies rise, cross your meridian, and set each day.
These computations can be fairly involved,
since planets continue their journey among the stars
even as the rotation of the earth brings them across the sky;
PyEphem has to internally re-compute their position several times
before it finds the exact circumstances of rising or setting.
But this is taken care of automatically,
leaving you to simply ask:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">gatech</span><span class="o">.</span><span class="n">next_setting</span><span class="p">(</span><span class="n">sun</span><span class="p">))</span>
<span class="go">1984/5/31 00:42:22</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">sun</span><span class="o">.</span><span class="n">alt</span><span class="p">,</span> <span class="n">sun</span><span class="o">.</span><span class="n">az</span><span class="p">))</span>
<span class="go">-0:15:46.4 297:20:44.3</span>
</pre></div>
</div>
<p>Functions also exist for finding risings, transits, and —
just for completeness —
the moment of “anti-transit” when the object lies along the meridian
directly under your feet.
See the section on <a class="reference external" href="quick#transit-rising-setting">transit, rising, and setting</a>
in the Quick Reference for more details.</p>
</div>
<div class="section" id="loading-bodies-from-catalogues">
<h2>Loading Bodies From Catalogues<a class="headerlink" href="#loading-bodies-from-catalogues" title="Permalink to this headline">¶</a></h2>
<p>So far we have dealt with the planets, the Sun, and the Moon —
major bodies whose orbits PyEphem already knows in great detail.
But for minor bodies, like comets and asteroids,
you must aquire and load the orbital parameters yourself.</p>
<p>Understand that because the major planets constantly perturb
the other bodies in the solar system, including each other,
it requires great effort —
years of observation yielding formulae with dozens or hundreds of terms —
to predict the position of a body accurately over decades or centuries.
For a comet or asteroid,
astronomers find it more convenient
to describe its orbit as perfect ellipse, parabola, or hyperbola,
and then issue new orbital parameters as its orbit changes.</p>
<p>The PyEphem home page provides links to several
<a class="reference external" href="http://rhodesmill.org/pyephem/catalogs">online catalogs</a> of orbital elements.
Once you have obtained elements for a particular body,
simply provide them to PyEphem’s <code class="docutils literal notranslate"><span class="pre">readdb()</span></code> function
in <a class="reference external" href="http://www.clearskyinstitute.com/xephem/help/xephem.html#mozTocId468501">ephem database format</a> and the resulting object is ready to use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">yh</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">readdb</span><span class="p">(</span><span class="s2">&quot;C/2002 Y1 (Juels-Holvorcem),e,103.7816,&quot;</span> <span class="o">+</span>
<span class="gp">... </span>   <span class="s2">&quot;166.2194,128.8232,242.5695,0.0002609,0.99705756,0.0000,&quot;</span> <span class="o">+</span>
<span class="gp">... </span>   <span class="s2">&quot;04/13.2508/2003,2000,g  6.5,4.0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">yh</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="s1">&#39;2003/4/11&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">yh</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="go">C/2002 Y1 (Juels-Holvorcem)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">yh</span><span class="o">.</span><span class="n">ra</span><span class="p">,</span> <span class="n">yh</span><span class="o">.</span><span class="n">dec</span><span class="p">))</span>
<span class="go">0:22:44.58 26:49:48.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">constellation</span><span class="p">(</span><span class="n">yh</span><span class="p">),</span> <span class="n">yh</span><span class="o">.</span><span class="n">mag</span><span class="p">))</span>
<span class="go">(&#39;And&#39;, &#39;Andromeda&#39;) 5.96</span>
</pre></div>
</div>
<p>(Unfortunately, the library upon which PyEphem is build
truncates object names to twenty characters, as you can see.)
Each call to <code class="docutils literal notranslate"><span class="pre">readdb()</span></code> returns an object appropriate
for the orbit specified in the database entry;
in this case it has returned an <code class="docutils literal notranslate"><span class="pre">EllipticalBody</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">yh</span><span class="p">)</span>  <span class="c1"># doctest: +ELLIPSIS</span>
<span class="go">&lt;ephem.EllipticalBody &#39;C/2002 Y1 (Juels-Holvorcem)&#39; at 0x...&gt;</span>
</pre></div>
</div>
<p>For objects for which you cannot find an entry in ephem database format,
you can always create the appropriate kind of object
and then fill in its orbital parameters yourself;
see the <a class="reference external" href="quick">Quick Reference</a> for their names and meanings.
By calling the <code class="docutils literal notranslate"><span class="pre">writedb()</span></code> function of a PyEphem object,
you can even get it to generate its own database entry
for archiving or distribution.</p>
<p>There is one other database format with which PyEphem is familiar:
the NORAD Two-Line Element format (TLE) used for earth satellites.
Here are some recent elements for the International Space Station.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">iss</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">readtle</span><span class="p">(</span><span class="s2">&quot;ISS (ZARYA)&quot;</span><span class="p">,</span>
<span class="gp">... </span> <span class="s2">&quot;1 25544U 98067A   03097.78853147  .00021906  00000-0  28403-3 0  8652&quot;</span><span class="p">,</span>
<span class="gp">... </span> <span class="s2">&quot;2 25544  51.6361  13.7980 0004256  35.6671  59.2566 15.58778559250029&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gatech</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="s1">&#39;2003/3/23&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iss</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">gatech</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">iss</span><span class="o">.</span><span class="n">rise_time</span><span class="p">,</span> <span class="n">iss</span><span class="o">.</span><span class="n">transit_time</span><span class="p">,</span> <span class="n">iss</span><span class="o">.</span><span class="n">set_time</span><span class="p">))</span>
<span class="go">2003/3/23 00:00:50 2003/3/23 00:03:26 2003/3/23 00:06:01</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">transit_time</span></code> for an artificial satellite is actually
defined in PyEphem as the moment at which it is at highest altitude,
not the moment at which it crosses (transits) the local meridian.</p>
<p>Note that earth satellites are fast movers —
in this case rising and setting in less than six minutes!
They can therefore have multiple risings and settings each day,
and the particular ones you get from <code class="docutils literal notranslate"><span class="pre">rise_time</span></code> and <code class="docutils literal notranslate"><span class="pre">set_time</span></code>
depend on the particular time of day for which you ask.
Repeating the above query eight hours later gives complete different results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gatech</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="s1">&#39;2003/3/23 8:00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iss</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">gatech</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">iss</span><span class="o">.</span><span class="n">rise_time</span><span class="p">,</span> <span class="n">iss</span><span class="o">.</span><span class="n">transit_time</span><span class="p">,</span> <span class="n">iss</span><span class="o">.</span><span class="n">set_time</span><span class="p">))</span>
<span class="go">2003/3/23 08:03:40 2003/3/23 08:08:25 2003/3/23 08:13:10</span>
</pre></div>
</div>
<p>When calling <code class="docutils literal notranslate"><span class="pre">compute()</span></code> for an earth satellite
you should provide an <code class="docutils literal notranslate"><span class="pre">Observer</span></code>,
and not simply a date and epoch,
since its location is entirely dependent
upon the location from which you are observing.
PyEphem provides extra information about earth satellites,
beyond the ones available for other objects;
again, see the <a class="reference external" href="quick">Quick Reference</a> for details.</p>
</div>
<div class="section" id="fixed-objects-precession-and-epochs">
<h2>Fixed Objects, Precession, and Epochs<a class="headerlink" href="#fixed-objects-precession-and-epochs" title="Permalink to this headline">¶</a></h2>
<p>The simplest kind of object to create from a catalog entry
are <em>fixed</em> objects,
for which a constant right ascension and declination are specified.
These include stars, nebulae, global clusters, and galaxies.
One example is Polaris, the North Star,
which lies at the end of Ursa Minor’s tail:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">polaris</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">readdb</span><span class="p">(</span><span class="s2">&quot;Polaris,f|M|F7,2:31:48.704,89:15:50.72,2.02,2000&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">polaris</span><span class="o">.</span><span class="n">dec</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
 <span class="c">...</span>
<span class="gr">RuntimeError</span>: <span class="n">field dec undefined until first compute()</span>
</pre></div>
</div>
<p>We are able to create the object successfully —
why should asking its position raise a runtime error?
The reason is that fixed objects, like planets,
have an undefined position and magnitude
until you call their <code class="docutils literal notranslate"><span class="pre">compute()</span></code> method
to determine their position for a particular date or <code class="docutils literal notranslate"><span class="pre">Observer</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">polaris</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>    <span class="c1"># uses the current time by default</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">polaris</span><span class="o">.</span><span class="n">a_dec</span><span class="p">)</span>
<span class="go">89:15:50.7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="s1">&#39;90&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">polaris</span><span class="o">.</span><span class="n">a_dec</span><span class="p">))</span>
<span class="go">0:44:09.3</span>
</pre></div>
</div>
<p>Much better; we see that the <cite>North Star</cite> lies
less than forty-five arc minutes from the pole.
But why should we have to call <code class="docutils literal notranslate"><span class="pre">compute()</span></code>
for something fixed —
something whose position is considered permanent,
and which should not move between one date and another?</p>
<p>The reason is that, while <cite>fixed</cite> stars and nebulae
are indeed nearly motionless over the span of human civilization,
the coordinate system by which we designate their positions
changes more rapidly.
Right ascension and declination are based
upon the orientation of the earth’s pole —
but it turns out that the pole slowly revolves
(around the axis of the ecliptic plane)
like the axis of a whirling top,
completing each revolution in roughly 25,800 years.
This motion is called <em>precession</em>.
Because this makes the entire coordinate system shift slightly every year,
is not sufficient to state that Polaris lies at
2h31m right ascension and 89:15° declination;
you have to say in <em>which year</em>.</p>
<p>That is why the Polaris entry above ends with <code class="docutils literal notranslate"><span class="pre">2000</span></code>;
this gives the year for which the coordinates are correct,
called the <em>epoch</em> of the coordinates.
Because the year 2000 is currently a very popular epoch
for quoting positions and orbital parameters,
<code class="docutils literal notranslate"><span class="pre">compute()</span></code> uses it by default;
but we can provide an <code class="docutils literal notranslate"><span class="pre">epoch=</span></code> keyword parameter
to have the coordinates translated into those for another year:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">polaris</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">epoch</span><span class="o">=</span><span class="s1">&#39;2100&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">polaris</span><span class="o">.</span><span class="n">a_dec</span><span class="p">)</span>
<span class="go">89:32:26.1</span>
</pre></div>
</div>
<p>Thus we see that in another hundred years Polaris
will actually lie closer to the pole that it does today.
(The <code class="docutils literal notranslate"><span class="pre">'2100'</span></code> is the same year/month/day format you have seen already,
missing both its month and day
because we are not bothering to be that specific.)
If you enter subsequent years you will find
that 2100 is very nearly the closest approach of the pole to Polaris,
and that soon afterwards they move apart.
For much of the twenty-five thousand year journey the pole makes,
there are no stars very near;
we may have been lucky to have held the Age of Exploration
as the pole was approaching as convenient a star as Polaris.</p>
<p>Today a dim star in Draco named Thuban
lies more than twenty degrees from the pole:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">thuban</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">readdb</span><span class="p">(</span><span class="s2">&quot;Thuban,f|V|A0,14:4:23.3,64:22:33,3.65,2000&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">thuban</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">thuban</span><span class="o">.</span><span class="n">a_dec</span><span class="p">)</span>
<span class="go">64:22:33.0</span>
</pre></div>
</div>
<p>But in 2801 BC, as the Egyptians built the pyramids,
Thuban served as their pole star,
while Polaris lay further from their pole than Thuban lies from ours today:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">thuban</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">epoch</span><span class="o">=</span><span class="s1">&#39;-2800&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">thuban</span><span class="o">.</span><span class="n">a_dec</span><span class="p">)</span>
<span class="go">89:54:35.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">polaris</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">epoch</span><span class="o">=</span><span class="s1">&#39;-2800&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">polaris</span><span class="o">.</span><span class="n">a_dec</span><span class="p">)</span>
<span class="go">63:33:17.6</span>
</pre></div>
</div>
<p>Realize that in these examples I have been lazy
by giving <code class="docutils literal notranslate"><span class="pre">compute()</span></code> an epoch without an actual date,
which requests the <em>current</em> position of each star
in the coordinates of another epoch.
This makes no difference for these fixed objects,
since their positions never change;
but when dealing with moving objects
one must always keep in mind the difference
between the date for which you want their position computed,
and the epoch in which you want those coordinates expressed.
Here are some example <code class="docutils literal notranslate"><span class="pre">compute()</span></code> calls,
beginning with one like the above but for a moving object:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">halley.compute(epoch='1066')</span></code></dt><dd><p>This is probably useless:
it computes the current position of <code class="docutils literal notranslate"><span class="pre">halley</span></code>,
but returns coordinates relative
to the direction the earth’s axis was pointing in the year 1066.
Unless you use a Conquest-era star atlas, this is not useful.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">halley.compute('1066',</span> <span class="pre">epoch='1066')</span></code></dt><dd><p>This is slightly more promising:
it computes the position of <code class="docutils literal notranslate"><span class="pre">halley</span></code> in 1066
and returns coordinates for the orientation of the earth in that year.
This might help you visualize
how the object was positioned above contemporary observers,
who considered it an ill omen in the imminent conflict
between King Harold of England and William the Bastard.
But to plot this position against a background of stars,
you would first have to recompute each star’s position in 1066 coordinates.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">halley.compute('1066')</span></code></dt><dd><p>This is what you will probably use most often;
you get the position of <code class="docutils literal notranslate"><span class="pre">halley</span></code> in the year 1066
but expressed in the 2000 coordinates that your star atlas probably uses.</p>
</dd>
</dl>
<p>When planning to observe with an equatorial telescope,
you may want to use the current date as your epoch,
because the rotation of the sky above your telescope
is determined by where the pole points today,
not where it pointed in 2000 or some other convenient epoch.
Computing positions in the epoch of their date
is accomplished by simply providing the same argument for both date and epoch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Jupiter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">epoch</span><span class="o">=</span><span class="n">ephem</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>   <span class="c1"># so both date and epoch are now</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">a_ra</span><span class="p">,</span> <span class="n">j</span><span class="o">.</span><span class="n">a_dec</span><span class="p">))</span>  <span class="c1"># doctest: +SKIP</span>
<span class="go">8:44:29.49 19:00:10.23</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="s1">&#39;2003/3/25&#39;</span><span class="p">,</span> <span class="n">epoch</span><span class="o">=</span><span class="s1">&#39;2003/3/25&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">a_ra</span><span class="p">,</span> <span class="n">j</span><span class="o">.</span><span class="n">a_dec</span><span class="p">))</span>
<span class="go">8:43:32.82 19:03:32.5</span>
</pre></div>
</div>
<p>Be careful when computing distances;
comparing two positions in the coordinates of their own epochs
will give slightly different results
than if the two were based on the same epoch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">j1</span><span class="p">,</span> <span class="n">j2</span> <span class="o">=</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Jupiter</span><span class="p">(),</span> <span class="n">ephem</span><span class="o">.</span><span class="n">Jupiter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j1</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="s1">&#39;2003/3/1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j2</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="s1">&#39;2003/4/1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">separation</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">j1</span><span class="o">.</span><span class="n">a_ra</span><span class="p">,</span> <span class="n">j1</span><span class="o">.</span><span class="n">a_dec</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">j2</span><span class="o">.</span><span class="n">a_ra</span><span class="p">,</span> <span class="n">j2</span><span class="o">.</span><span class="n">a_dec</span><span class="p">)))</span>   <span class="c1"># coordinates are both epoch 2000</span>
<span class="go">1:46:35.9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j1</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="s1">&#39;2003/3/1&#39;</span><span class="p">,</span> <span class="s1">&#39;2003/3/1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j2</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="s1">&#39;2003/4/1&#39;</span><span class="p">,</span> <span class="s1">&#39;2003/4/1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ephem</span><span class="o">.</span><span class="n">separation</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">j1</span><span class="o">.</span><span class="n">a_ra</span><span class="p">,</span> <span class="n">j1</span><span class="o">.</span><span class="n">a_dec</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">j2</span><span class="o">.</span><span class="n">a_ra</span><span class="p">,</span> <span class="n">j2</span><span class="o">.</span><span class="n">a_dec</span><span class="p">)))</span>   <span class="c1"># coordinates are both epoch-of-date</span>
<span class="go">1:46:31.6</span>
</pre></div>
</div>
<p>Comparing coordinates of the same epoch, as in the first call above,
measures motion against the background of stars;
comparing coordinates from different epochs, as in the second call,
measures motion against the slowly shifting coordinate system of the earth.
Users are most often interested in the first kind of measurement,
and stick with a single epoch the whole way through a computation.</p>
<p>It was for the sake of simplicity
that all of the examples in this section
simply provided dates as arguments to the <code class="docutils literal notranslate"><span class="pre">compute()</span></code> function.
If you are instead using an <code class="docutils literal notranslate"><span class="pre">Observer</span></code> argument,
then you specify the epoch through the observer’s <code class="docutils literal notranslate"><span class="pre">epoch</span></code> variable,
not through the <code class="docutils literal notranslate"><span class="pre">epoch=</span></code> argument.
Observers use epoch 2000 by default.</p>
<p>Finally,
make sure you understand
that your choice of epoch only affects absolute position —
the right ascension and declination returned for objects —
<em>not</em> the azimuth and altitude of an object above an observer.
This is because the sun will hang in the same position over Atlanta
whether the star atlas with which you plot its position
has epoch 2000, or 1950, or even 1066 coordinates;
the epoch only affects how you name locations in the sky,
not how they are positioned with respect to you.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Luke McFadden, Denis Vida, Peter Brown

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>